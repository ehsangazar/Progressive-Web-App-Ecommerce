"use strict";

exports.__esModule = true;
exports.default = createStyleNode;

var _path = require("path");

var _createFilename = _interopRequireDefault(require("./createFilename"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function createStyleNode(path, identifier, {
  pluginOptions,
  file
}) {
  const {
    start,
    end
  } = path.node;
  const style = {
    start,
    end
  };
  const getFileName = pluginOptions.getFileName || _createFilename.default;
  const hostFile = file.opts.filename;
  style.absoluteFilePath = getFileName(hostFile, pluginOptions, identifier);
  let filename = (0, _path.relative)((0, _path.dirname)(hostFile), style.absoluteFilePath);

  if (!filename.startsWith('.')) {
    filename = `./${filename}`;
  }

  style.relativeFilePath = filename;
  style.identifier = identifier;
  return style;
}